int ledPin = D7;           // The pin to blink the LED


void setup() {
    
    pinMode(ledPin, OUTPUT);   //Configuring the pin
    digitalWrite(ledPin, LOW);
    
    Particle.subscribe("Deakin_RIOT_SIT210_Photon_Buddy", waveHandler);     //Subscribing to the Deakin Particle Photon's event

}

void loop() {
    
    //don't need anything here since we aren't publishing
    
}

void waveHandler(String event, String data) {
    
    if (data == "wave"){
        //Flashes the LED 3 times in response to a wave
        for (int i = 0; i < 3; i++){
            digitalWrite(ledPin, HIGH);
            delay(2000);
            digitalWrite(ledPin, LOW);
            delay(2000);
        }
    }
    if (data == "pat"){
        //Flashes the LED 10 times in response to a pat
        for (int i = 0; i < 10; i++)
        {
            digitalWrite(ledPin, HIGH);
            delay(200);
            digitalWrite(ledPin, LOW);
            delay(200);
        }
    }

}
